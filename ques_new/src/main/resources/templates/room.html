<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>问答房间</title>
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body>
<div class="container">
    <h2>欢迎回来，[[${session.user.username}]]</h2>

    <!-- 消息列表 -->
    <div class="message-list">
        <th:block th:each="message : ${messageList}">
            <div class="message-card">
                <h3 th:text="${message.title}"></h3>
                <p>发布时间: <span th:text="${#dates.format(message.time, 'yyyy-MM-dd HH:mm:ss')}"></span></p>
                <p>发布者: <span th:text="${message.sender}"></span></p>
                <a th:href="@{/message/view(id=${message.id})}" class="btn">查看详情</a>
            </div>
        </th:block>

        <!-- 无消息提示 -->
        <div th:if="${#lists.isEmpty(messageList)}">
            <p>暂无消息，快来发布第一条吧！</p>
        </div>
    </div>

    <!-- 发布新消息 -->
    <div class="message-form">
        <h3>发布新消息</h3>
        <form action="/room" method="post">
            <div class="form-group">
                <label>标题</label>
                <input type="text" name="title" class="form-control" required>
            </div>
            <div class="form-group">
                <label>内容</label>
                <textarea name="content" class="form-control" rows="5" required></textarea>
            </div>
            <button type="submit" class="btn">发布</button>
        </form>
    </div>
</div>
</body>
</html>